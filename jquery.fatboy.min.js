(function(a,l,k,d){if(a===d)throw"jQuery is required. Please make sure you include a reference to jQuery and that this script is included below it.";var c="fatBoy",i="myFatBoy",e={limit:3,threshold:25,triggerEvent:"fatboy:eat",uiEvent:"scroll",callback:d,limitReached:d,limitReachedEvent:"fatboy:alldone"},f,g,h=a(l),j=a(k);f=function(a){return h.scrollTop()+a>=j.height()-h.height()};g=function(){if(this.canProcess&&f(this.options.threshold)&&(this.options.limit===0||this.count<this.options.limit)){this.eat();this.count++;this.options.threshold+=10;this.options.limit!==0&&this.count>=this.options.limit&&this.diet()}};function b(d,b){this.el=d;this.$el=a(d);this.options=b?a.extend({},e,b):e;this._name=c;this.count=0;this.canProcess=true;this.init();return this}b.fn=b.prototype;b.defaults=e;b.fn.init=function(){this.$el.bind(this.options.uiEvent,a.proxy(g,this));this.options.callback&&this.$el.atBottom(this.options.callback);this.options.limitReached&&this.$el.atLimit(this.options.limitReached)};b.fn.atBottom=function(a){if(a)this.$el.bind(this.options.triggerEvent,a);else this.eat();return this};b.fn.atLimit=function(a){a&&this.$el.bind(this.options.limitReachedEvent,a);return this};b.fn.eat=function(){this.canProcess=false;this.$el.trigger(this.options.triggerEvent);this.canProcess=true;return this};b.fn.diet=function(){this.$el.unbind(this.options.uiEvent);this.$el.trigger(this.options.limitReachedEvent)};a.fn[c]=function(d){return this.each(function(){!a.data(this,"plugin_"+c)&&a.data(this,"plugin_"+c,new b(this,d))})};a.fn[i]=function(){return this.data("plugin_"+c)}})(window.jQuery,window,document)